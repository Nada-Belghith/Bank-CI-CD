<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
     >

<head>
    <title layout:fragment="title">Liste des Clients</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Style personnalisé -->
	<link th:href="@{/css/jquery-ui.min.css}" rel="stylesheet">

</head>

<body>
<div layout:fragment="content">
    <div class="container mt-4">
        <!-- En-tête de la page -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="text-primary"><i class="bi bi-people-fill"></i> Liste des Clients</h1>
            <a th:href="@{/clients/add}" class="btn btn-success">
                <i class="bi bi-plus-circle"></i> Ajouter Client
            </a>
        </div>

        <!-- Table des clients -->
        <div class="card shadow-sm border-0 rounded-4">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover align-middle text-center">
                        <thead class="table-light">
                        <tr>
                            <th scope="col">CIN</th>
                            <th scope="col">Nom</th>
                            <th scope="col">Prénom</th>
                            <th scope="col">Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="client : ${clients}" th:id="${client.cin}">
                            <td th:text="${client.cin}"></td>
                            <td th:text="${client.nom}"></td>
                            <td th:text="${client.prenom}"></td>
                            <td>
                                <div class="d-flex justify-content-center gap-2">
                                    <!-- Modifier -->
                                    <a th:href="@{/clients/edit/{cin}(cin=${client.cin})}"
                                       class="btn btn-warning btn-sm" data-bs-toggle="tooltip" title="Edit Compte"><i class="bi bi-pencil"></i>Edit</a>
                                    </a>
                                    <!-- Supprimer -->
									<button class="btn btn-danger btn-sm delete-client" th:data-cin="${client.cin}" data-bs-toggle="tooltip"
										title="Delete Client"> <i class="bi bi-trash"></i> Delete</button>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <!-- Message si aucun client -->
                    <div th:if="${#lists.isEmpty(clients)}" class="alert alert-info text-center">
                        Aucun client enregistré pour le moment.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<div layout:fragment="scripts">
	<script th:src="@{/js/jquery-3.7.0.min.js}"></script>
	<script th:src="@{/js/jquery-ui.min.js}"></script>
	<script th:src="@{/js/sweetalert2@11.js}"></script>
	<script th:src="@{/js/client.js}"></script>

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- SweetAlert2 pour confirmation de suppression -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Script pour gérer la suppression -->
  
</div>

</body>
</html>
